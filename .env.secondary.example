# Node B (Secondary/Backup) - Two-Node HA Configuration
# This file contains configuration for the BACKUP node in a two-node HA setup
# Copy this file to .env on Node B (192.168.8.243)

# Node Configuration
NODE_ROLE=BACKUP
NODE_IP=192.168.8.243
KEEPALIVED_PRIORITY=150
HOSTNAME=orion-dns-backup

# Peer Configuration (Node A)
PEER_IP=192.168.8.249
UNICAST_SRC_IP=192.168.8.243

# Network Configuration
NETWORK_INTERFACE=eth1
VIP_ADDRESS=192.168.8.250
VIP_NETMASK=24
SUBNET=192.168.8.0/24
GATEWAY=192.168.8.1

# VRRP Configuration
ROUTER_ID=orion-dns-ha
VIRTUAL_ROUTER_ID=51
VRRP_PASSWORD=changeme_vrrp
USE_UNICAST_VRRP=true

# DNS Configuration
DOMAIN_NAME=lan
CHECK_DNS_TARGET=127.0.0.1
CHECK_DNS_FQDN=github.com
CHECK_INTERVAL=5
CHECK_TIMEOUT=3
CHECK_WEIGHT=-20
CHECK_FALL=2
CHECK_RISE=2

# Timezone
TZ=UTC

# Pi-hole Configuration
WEBPASSWORD=changeme_pihole
FTLCONF_webserver_api_password=
FTLCONF_dns_upstreams=127.0.0.1#5335
FTLCONF_dns_dnssec=true
DNSMASQ_LISTENING=all

# Reverse DNS Configuration
REV_SERVER=true
REV_SERVER_TARGET=192.168.8.1
REV_SERVER_DOMAIN=lan
REV_SERVER_CIDR=192.168.8.0/24

# Unbound Configuration (Local recursive DNS by default)
# Leave these empty for fully local DNS resolution
UNBOUND_FORWARD_TLS=
UNBOUND_FORWARD_ZONES=

# Optional: NextDNS DoT forwarding
# If you want DNS over TLS forwarding, uncomment and configure nextdns-forward.conf
# See unbound/nextdns-forward.conf for details

# Optional: Redis caching support
REDIS_ENABLE=false
REDIS_SERVER=redis:6379
REDIS_PASSWORD=

# Optional: Prometheus Pushgateway integration
PROM_PUSHGATEWAY_URL=
PROM_JOB_NAME=orion_dns_ha
PROM_INSTANCE_LABEL=node-b
